<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxe Interior Design Studio</title>
    <style>
        :root {
            --nav-offset: 48px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            color: #333;
            overflow-x: hidden;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            background: #2c3e50;
            border: 1px solid #c9a961;
            border-radius: 6px;
            text-decoration: none;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
            padding: 6px;
        }

        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 10px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-links {
            display: flex;
            gap: 40px;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #2c3e50;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #c9a961;
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 5px;
        }

        .menu-toggle span {
            width: 25px;
            height: 3px;
            background: #2c3e50;
            transition: all 0.3s;
        }

        #container {
            height: 400vh;
            position: relative;
        }

        .video-container {
            position: sticky;
            top: 0;
            height: 100vh;
            width: 100%;
            overflow: hidden;
        }

        .video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 2;
        }

        .video-text {
            text-align: center;
            padding: 20px;
        }

        .video-text h1 {
            font-size: 72px;
            margin-bottom: 20px;
            font-weight: 300;
            letter-spacing: 3px;
        }

        .video-text p {
            font-size: 24px;
            font-weight: 300;
        }

        .scroll-text-right {
            position: absolute;
            right: 80px;
            top: calc(50% + var(--nav-offset));
            transform: translateY(-50%);
            max-width: 400px;
            opacity: 0;
            z-index: 4;
            background: #f5efe6;
            color: #2c3e50;
            padding: 20px 24px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
        }

        .scroll-text-right h2 {
            font-size: 42px;
            margin-bottom: 20px;
            font-weight: 300;
            line-height: 1.2;
            color: #2c3e50;
        }

        .scroll-text-right p {
            font-size: 18px;
            line-height: 1.6;
            font-weight: 300;
            color: #2c3e50;
        }

        .scroll-text-left {
            position: absolute;
            left: 80px;
            top: calc(50% + var(--nav-offset));
            transform: translateY(-50%);
            max-width: 450px;
            opacity: 1;
            z-index: 3;
            color: white;
        }

        .text-section {
            margin-bottom: 50px;
            opacity: 0;
            background: #f5efe6;
            padding: 24px 24px 22px;
            padding-top: 84px;
            border-radius: 12px;
            display: inline-block;
            position: relative;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
        }

        .text-section h3 {
            font-size: 36px;
            margin-bottom: 15px;
            font-weight: 300;
            letter-spacing: 2px;
            color: #2c3e50;
        }

        .text-section p {
            font-size: 16px;
            line-height: 1.8;
            font-weight: 300;
            color: #2c3e50;
        }

        .text-number {
            font-size: 56px;
            font-weight: 700;
            line-height: 1;
            opacity: 1;
            position: absolute;
            top: 12px;
            left: 24px;
            margin: 0;
            color: #c9a961;
        }

        section {
            padding: 100px 50px;
        }

        .section-title {
            font-size: 42px;
            text-align: center;
            margin-bottom: 60px;
            color: #2c3e50;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .service-card {
            padding: 50px;
            background: #f8f9fa;
            border-radius: 0px;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .service-icon {
            font-size: 48px;
            margin-bottom: 20px;
            color: #c9a961;
        }

        .service-card h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .service-card p {
            color: #1b1a1a;
            line-height: 1.6;
        }

        .about-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .about-image {
            position: relative;
            width: 100%;
            height: 500px;
            border-radius: 0px;
            overflow: hidden;
            background: #ffffff;
            perspective: 1000px;
        }

        .about-slider {
            position: absolute;
            inset: 0;
            transform-style: preserve-3d;
        }

        .about-slide {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            opacity: 0;
            transform: scale(1.2) translateX(100%) rotateY(25deg);
            will-change: transform, opacity;
            transform-origin: center center;
        }

        .about-slide.is-active {
            opacity: 1;
            transform: scale(1) translateX(0) rotateY(0deg);
        }

        .about-image::after {
            content: "";
            position: absolute;
            inset: 0;
            /* background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0) 40%, rgba(0, 0, 0, 0.25) 100%); */
            pointer-events: none;
            z-index: 10;
        }

        .carousel-dots {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 20;
        }

        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .carousel-dot.active {
            background: #c9a961;
            border-color: white;
            transform: scale(1.3);
        }

        .carousel-dot:hover {
            background: rgba(201, 169, 97, 0.8);
        }

        .about-text h3 {
            font-size: 32px;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .about-text p {
            color: #666;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        #portfolio {
            background: #f8f9fa;
        }

        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .portfolio-item {
            height: 400px;
            background: #ddd;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }

        .portfolio-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.7) 100%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .portfolio-item:hover::before {
            opacity: 1;
        }

        .portfolio-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 30px;
            color: white;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s;
        }

        .portfolio-item:hover .portfolio-info {
            transform: translateY(0);
            opacity: 1;
        }

        .portfolio-info h4 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .portfolio-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.3s ease;
        }

        .portfolio-item:hover img {
            transform: scale(1.05);
        }

        .contact-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .contact-container p {
            font-size: 18px;
            color: #666;
            margin-bottom: 40px;
            line-height: 1.8;
        }

        .contact-button {
            display: inline-block;
            padding: 15px 50px;
            background: #c9a961;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: background 0.3s;
        }

        .contact-button:hover {
            background: #b8975a;
        }

        footer {
            background: #2c3e50;
            color: white;
            padding: 60px 50px 30px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h4 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #c9a961;
        }

        .footer-section p,
        .footer-section a {
            color: #bbb;
            line-height: 1.8;
            text-decoration: none;
            display: block;
            margin-bottom: 10px;
        }

        .footer-section a:hover {
            color: #c9a961;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #444;
            color: #888;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            :root {
                --nav-offset: 60px;
            }

            nav {
                padding: 15px 20px;
            }

            .logo {
                width: 36px;
                height: 36px;
            }

            .logo img {
                padding: 5px;
            }

            /* Hamburger Menu */
            .menu-toggle {
                display: flex;
            }

            .nav-links {
                position: fixed;
                top: 60px;
                right: -100%;
                width: 70%;
                height: calc(100vh - 60px);
                background: rgba(255, 255, 255, 0.98);
                flex-direction: column;
                padding: 40px 20px;
                gap: 20px;
                transition: right 0.3s ease;
                box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            }

            .nav-links.active {
                right: 0;
            }

            .nav-links a {
                font-size: 16px;
                padding: 10px 0;
                border-bottom: 1px solid #eee;
            }

            /* Video Section */
            .video-text h1 {
                font-size: 32px;
                margin-bottom: 15px;
                letter-spacing: 1px;
            }

            .video-text p {
                font-size: 16px;
            }

            /* Scroll Text Sections */
            .scroll-text-right {
                right: 20px;
                max-width: calc(100% - 40px);
                padding: 15px 20px;
            }

            .scroll-text-right h2 {
                font-size: 28px;
                margin-bottom: 15px;
            }

            .scroll-text-right p {
                font-size: 14px;
            }

            .scroll-text-left {
                left: 20px;
                max-width: calc(100% - 40px);
            }

            .text-section {
                margin-bottom: 30px;
                padding: 20px 20px 18px;
                padding-top: 60px;
            }

            .text-section h3 {
                font-size: 24px;
                margin-bottom: 10px;
            }

            .text-section p {
                font-size: 14px;
                line-height: 1.6;
            }

            .text-number {
                font-size: 40px;
                top: 10px;
                left: 20px;
            }

            /* Sections */
            section {
                padding: 60px 20px;
            }

            .section-title {
                font-size: 32px;
                margin-bottom: 40px;
            }

            /* Services Grid */
            .services-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .service-card {
                padding: 30px;
            }

            .service-icon {
                font-size: 40px;
            }

            .service-card h3 {
                font-size: 22px;
            }

            .service-card p {
                font-size: 15px;
            }

            /* About Section */
            .about-content {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .about-image {
                height: 400px;
                order: -1;
            }

            .about-text h3 {
                font-size: 26px;
            }

            .about-text p {
                font-size: 15px;
            }

            /* Portfolio Grid */
            .portfolio-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .portfolio-item {
                height: 350px;
            }

            .portfolio-info {
                padding: 20px;
            }

            .portfolio-info h4 {
                font-size: 20px;
            }

            .portfolio-info p {
                font-size: 14px;
            }

            /* Contact Section */
            .contact-container p {
                font-size: 16px;
                margin-bottom: 30px;
            }

            .contact-button {
                padding: 12px 40px;
                font-size: 14px;
            }

            /* Footer */
            footer {
                padding: 40px 20px 20px;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
                margin-bottom: 30px;
            }

            .footer-section h4 {
                font-size: 18px;
            }

            .footer-section p,
            .footer-section a {
                font-size: 14px;
            }

            .footer-bottom {
                font-size: 13px;
            }
        }

        /* Tablet Styles */
        @media (min-width: 769px) and (max-width: 1024px) {
            nav {
                padding: 10px 30px;
            }

            .nav-links {
                gap: 25px;
            }

            .video-text h1 {
                font-size: 56px;
            }

            .video-text p {
                font-size: 20px;
            }

            .scroll-text-right {
                right: 40px;
                max-width: 350px;
            }

            .scroll-text-left {
                left: 40px;
                max-width: 400px;
            }

            section {
                padding: 80px 40px;
            }

            .section-title {
                font-size: 36px;
            }

            .services-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .portfolio-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <nav>
        <a href="#home" class="logo" aria-label="Home">
            <img src="logo/dm.webp" alt="LUXE Logo" />
        </a>
        <div class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <ul class="nav-links" id="navLinks">
            <li><a href="#home">Home</a></li>
            <li><a href="#services">Services</a></li>
            <li><a href="#portfolio">Portfolio</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <audio id="bg-music" preload="auto" loop>
        <source src="music/calm.mp3" type="audio/mpeg">
    </audio>

    <div id="container">
        <div class="video-container">
            <video class="video-background" muted playsinline preload="metadata">
                <source src="videos/outp1.mp4" type="video/mp4">
                <track kind="subtitles" src="videos/outp1.mp4" srclang="en" label="English Subtitles" default>
                <track kind="descriptions" src="videos/output1-descriptions.vtt" srclang="en" label="Audio Description">
            </video>
            <div class="video-overlay">
                <div class="video-text">
                    <h1>Transform Your Space</h1>
                    <p>Luxury Interior Design That Reflects Your Style</p>
                </div>

                <div class="scroll-text-right">
                    <h2>Timeless Elegance</h2>
                    <p>We believe in creating spaces that stand the test of time, blending classic sophistication with
                        modern functionality.</p>
                </div>
            </div>

            <div class="scroll-text-left">
                <div class="text-section" id="text-1">
                    <div class="text-number">01</div>
                    <h3>Design Philosophy</h3>
                    <p>Every project begins with understanding your unique vision and lifestyle, creating personalized
                        spaces that tell your story.</p>
                </div>
                <div class="text-section" id="text-2">
                    <div class="text-number">02</div>
                    <h3>Attention to Detail</h3>
                    <p>From custom millwork to curated finishes, we obsess over every element to ensure perfection in
                        execution.</p>
                </div>
                <div class="text-section" id="text-3">
                    <div class="text-number">03</div>
                    <h3>Sustainable Luxury</h3>
                    <p>Beautiful design shouldn't compromise our planet. We integrate eco-friendly materials and
                        practices in every project.</p>
                </div>
            </div>
        </div>
    </div>

    <section id="services">
        <h2 class="section-title">Our Services</h2>
        <div class="services-grid">
            <div class="service-card">
                <div class="service-icon">🏠</div>
                <h3>Residential Design</h3>
                <p>Create stunning living spaces that perfectly balance aesthetics and functionality for your home.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">🏢</div>
                <h3>Commercial Spaces</h3>
                <p>Professional office and retail environments designed to enhance productivity and brand identity.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">💡</div>
                <h3>Lighting Design</h3>
                <p>Strategic lighting solutions that transform ambiance and highlight architectural features.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">🎨</div>
                <h3>Color Consultation</h3>
                <p>Expert color palettes that create harmony and express your unique personality.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">🪑</div>
                <h3>Custom Furniture</h3>
                <p>Bespoke furniture pieces crafted to fit your space and complement your design vision.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">🖼️</div>
                <h3>Art Curation</h3>
                <p>Carefully selected artwork and decor to complete your interior design narrative.</p>
            </div>
        </div>
    </section>

    <section id="about">
        <h2 class="section-title">About Us</h2>
        <div class="about-content">
            <div class="about-image">
                <div class="about-slider">
                    <img class="about-slide is-active" src="images/about.jpg" alt="Studio detail 1">
                    <img class="about-slide" src="images/about-2.jpg" alt="Studio detail 2">
                    <img class="about-slide" src="images/about-3.jpg" alt="Studio detail 3">
                    <img class="about-slide" src="images/about-4.jpg" alt="Studio detail 4">
                    <img class="about-slide" src="images/about-5.jpg" alt="Studio detail 5">
                </div>
                <div class="carousel-dots">
                    <span class="carousel-dot active" data-index="0"></span>
                    <span class="carousel-dot" data-index="1"></span>
                    <span class="carousel-dot" data-index="2"></span>
                    <span class="carousel-dot" data-index="3"></span>
                    <span class="carousel-dot" data-index="4"></span>
                </div>
            </div>
            <div class="about-text">
                <h3>Crafting Spaces, Creating Stories</h3>
                <p>With over 15 years of experience in luxury interior design, we specialize in creating timeless spaces
                    that reflect our clients' personalities and lifestyles.</p>
                <p>Our team of award-winning designers combines artistic vision with practical expertise to deliver
                    exceptional results that exceed expectations. We believe that great design is not just about
                    aesthetics—it's about creating environments that enhance the way you live and work.</p>
                <p>From concept to completion, we guide you through every step of the design journey, ensuring a
                    seamless and enjoyable experience.</p>
            </div>
        </div>
    </section>

    <section id="portfolio">
        <h2 class="section-title">Featured Projects</h2>
        <div class="portfolio-grid">
            <div class="portfolio-item">
                <img src="images/penth.webp" alt="Modern Penthouse" />
                <div class="portfolio-info">
                    <h4>Modern Penthouse</h4>
                    <p>New York, NY</p>
                </div>
            </div>
            <div class="portfolio-item">
                <img src="images/coastal.jpg" alt="Coastal Retreat" />
                <div class="portfolio-info">
                    <h4>Coastal Retreat</h4>
                    <p>Malibu, CA</p>
                </div>
            </div>
            <div class="portfolio-item">
                <img src="images/urban.jpg" alt="Urban Loft" />
                <div class="portfolio-info">
                    <h4>Urban Loft</h4>
                    <p>Chicago, IL</p>
                </div>
            </div>
            <div class="portfolio-item">
                <img src="images/about.jpg" alt="Classic Elegance" />
                <div class="portfolio-info">
                    <h4>Classic Elegance</h4>
                    <p>Boston, MA</p>
                </div>
            </div>
            <div class="portfolio-item">
                <img src="images/about-2.jpg" alt="Modern Villa" />
                <div class="portfolio-info">
                    <h4>Modern Villa</h4>
                    <p>Miami, FL</p>
                </div>
            </div>
            <div class="portfolio-item">
                <img src="images/about-3.jpg" alt="Mountain Retreat" />
                <div class="portfolio-info">
                    <h4>Mountain Retreat</h4>
                    <p>Aspen, CO</p>
                </div>
            </div>
        </div>
    </section>

    <section id="contact">
        <h2 class="section-title">Let's Create Together</h2>
        <div class="contact-container">
            <p>Ready to transform your space? We'd love to hear about your project and discuss how we can bring your
                vision to life. Schedule a consultation with our design team today.</p>
            <a href="#" class="contact-button">Get In Touch</a>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>LUXE Studio</h4>
                <p>Creating beautiful spaces that inspire and delight. Your vision, our expertise.</p>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <p>123 Design Avenue<br>New York, NY 10001</p>
                <p>Phone: (555) 123-4567<br>Email: hello@luxestudio.com</p>
            </div>
            <div class="footer-section">
                <h4>Hours</h4>
                <p>Monday - Friday: 9AM - 6PM<br>Saturday: 10AM - 4PM<br>Sunday: Closed</p>
            </div>
            <div class="footer-section">
                <h4>Follow Us</h4>
                <a href="#">Instagram</a>
                <a href="#">Pinterest</a>
                <a href="#">Facebook</a>
                <a href="#">LinkedIn</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Luxe Interior Design Studio. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
        $(document).ready(function () {
            console.clear();
            $('video').addClass('video-background');

            // Mobile Menu Toggle
            $('#menuToggle').click(function () {
                $('#navLinks').toggleClass('active');
            });

            // Close menu when clicking a link
            $('.nav-links a').click(function () {
                $('#navLinks').removeClass('active');
            });

            const video = document.querySelector(".video-background");
            const music = document.getElementById("bg-music");
            let src = video.currentSrc || video.src;

            function once(el, event, fn, opts) {
                var onceFn = function (e) {
                    el.removeEventListener(event, onceFn);
                    fn.apply(this, arguments);
                };
                el.addEventListener(event, onceFn, opts);
                return onceFn;
            }

            once(document.documentElement, "touchstart", function (e) {
                video.play();
                video.pause();
            });

            if (music) {
                music.preload = 'auto';
                music.load();
                music.volume = 0;
                const primeMusic = function () {
                    music.play()
                        .then(function () { music.volume = 0; })
                        .catch(function () { });
                };
                once(document.documentElement, "touchstart", primeMusic);
                once(document.documentElement, "pointerdown", primeMusic);
                once(document.documentElement, "click", primeMusic);
                once(document, "keydown", primeMusic);
            }

            gsap.registerPlugin(ScrollTrigger);

            // About slider
            (function initAboutSlider() {
                const section = document.querySelector('#about');
                const container = section?.querySelector('.about-image');
                if (!container) return;

                const slides = Array.from(container.querySelectorAll('.about-slide'));
                const dots = Array.from(container.querySelectorAll('.carousel-dot'));
                if (!slides.length) return;

                gsap.set(slides, {
                    autoAlpha: 0,
                    scale: 1.2,
                    x: '100%',
                    rotationY: 25,
                    y: 0,
                    transformOrigin: 'center center'
                });
                gsap.set(slides[0], {
                    autoAlpha: 1,
                    scale: 1,
                    x: '0%',
                    rotationY: 0,
                    y: 0
                });

                const slideCount = slides.length;

                const tl = gsap.timeline({
                    defaults: { ease: 'power3.inOut' },
                    scrollTrigger: {
                        trigger: section,
                        start: 'top top',
                        end: () => `+=${(slideCount - 1) * 100}%`,
                        scrub: true,
                        pin: true,
                        anticipatePin: 1,
                        invalidateOnRefresh: true
                    }
                });

                for (let i = 0; i < slides.length - 1; i++) {
                    const current = slides[i];
                    const next = slides[i + 1];

                    tl.to(current, {
                        autoAlpha: 0,
                        scale: 0.9,
                        x: '-80%',
                        rotationY: -20,
                        y: -30,
                        duration: 0.9
                    })
                        .fromTo(next, {
                            autoAlpha: 0,
                            scale: 1.3,
                            x: '100%',
                            rotationY: 30,
                            y: 50
                        }, {
                            autoAlpha: 1,
                            scale: 1,
                            x: '0%',
                            rotationY: 0,
                            y: 0,
                            duration: 1.1
                        }, '<0.1');
                }

                tl.add(() => {
                    gsap.set(slides[slideCount - 1], { autoAlpha: 1, scale: 1, x: '0%', rotationY: 0, y: 0 });
                });

                ScrollTrigger.create({
                    trigger: section,
                    start: 'top top',
                    end: () => `+=${(slideCount - 1) * 100}%`,
                    scrub: true,
                    onUpdate: self => {
                        const idx = Math.min(slideCount - 1, Math.round(self.progress * (slideCount - 1)));
                        dots.forEach((dot, i) => dot.classList.toggle('active', i === idx));
                    }
                });

                container.addEventListener('mousemove', (e) => {
                    const rect = container.getBoundingClientRect();
                    const xPercent = ((e.clientX - rect.left) / rect.width - 0.5) * 3;
                    const yPercent = ((e.clientY - rect.top) / rect.height - 0.5) * 3;

                    gsap.to(slides, {
                        x: `${xPercent}%`,
                        y: `${yPercent}%`,
                        duration: 0.5,
                        ease: 'power2.out'
                    });
                });

                container.addEventListener('mouseleave', () => {
                    gsap.to(slides, {
                        x: '0%',
                        y: '0%',
                        duration: 0.6,
                        ease: 'power2.out'
                    });
                });
            })();

            let tl = gsap.timeline({
                defaults: { duration: 1 },
                scrollTrigger: {
                    trigger: "#container",
                    start: "top top",
                    end: "bottom bottom",
                    scrub: true
                }
            });

            once(video, "loadedmetadata", () => {
                tl.fromTo(
                    video,
                    { currentTime: 0 },
                    { currentTime: video.duration || 1 }
                );
            });

            setTimeout(function () {
                if (window["fetch"]) {
                    fetch(src)
                        .then((response) => response.blob())
                        .then((response) => {
                            var blobURL = URL.createObjectURL(response);
                            var t = video.currentTime;
                            once(document.documentElement, "touchstart", function () {
                                video.play();
                                video.pause();
                            });
                            video.setAttribute("src", blobURL);
                            video.currentTime = t + 0.01;
                        });
                }
            }, 1000);

            if (music) {
                ScrollTrigger.create({
                    trigger: "#container",
                    start: "top top",
                    end: "bottom bottom",
                    onEnter: function () {
                        music.play().catch(function () { });
                        gsap.killTweensOf(music);
                        gsap.set(music, { volume: Math.max(music.volume || 0, 0.15) });
                        gsap.to(music, { volume: 0.8, duration: 2, ease: "power2.out", overwrite: true });
                    },
                    onEnterBack: function () {
                        music.play().catch(function () { });
                        gsap.killTweensOf(music);
                        gsap.set(music, { volume: Math.max(music.volume || 0, 0.15) });
                        gsap.to(music, { volume: 0.8, duration: 2, ease: "power2.out", overwrite: true });
                    },
                    onLeave: function () {
                        gsap.killTweensOf(music);
                        gsap.to(music, { volume: 0, duration: 1.8, ease: "power2.in", overwrite: true });
                    },
                    onLeaveBack: function () {
                        gsap.killTweensOf(music);
                        gsap.to(music, { volume: 0, duration: 1.8, ease: "power2.in", overwrite: true });
                    },
                    onRefresh: function (self) {
                        var active = self.isActive;
                        gsap.killTweensOf(music);
                        if (active) {
                            music.play().catch(function () { });
                            gsap.set(music, { volume: 0.15 });
                            gsap.to(music, { volume: 0.8, duration: 2, ease: "power2.out", overwrite: true });
                        } else {
                            gsap.set(music, { volume: 0 });
                            music.play().catch(function () { });
                        }
                    }
                });

                document.addEventListener('visibilitychange', function () {
                    if (!document.hidden) {
                        var st = ScrollTrigger.getAll().find(function (s) { return s.vars && s.vars.trigger === "#container"; });
                        if (st && st.isActive) {
                            music.play().catch(function () { });
                        }
                    }
                });
            }

            let textTl = gsap.timeline({
                scrollTrigger: {
                    trigger: "#container",
                    start: "top top",
                    end: "bottom bottom",
                    scrub: true
                }
            });

            textTl.to(".video-text", { opacity: 0, duration: 0.05 }, 0);
            textTl.fromTo(".scroll-text-right", { x: 100, opacity: 0 }, { x: 0, opacity: 1, duration: 0.05 }, 0.05)
                .to(".scroll-text-right", { x: -100, opacity: 0, duration: 0.05 }, 0.25);
            textTl.fromTo("#text-1", { x: -100, opacity: 0 }, { x: 0, opacity: 1, duration: 0.05 }, 0.35)
                .to("#text-1", { x: 100, opacity: 0, duration: 0.05 }, 0.55);
            textTl.fromTo("#text-2", { x: -100, opacity: 0 }, { x: 0, opacity: 1, duration: 0.05 }, 0.60)
                .to("#text-2", { x: 100, opacity: 0, duration: 0.05 }, 0.80);
            textTl.fromTo("#text-3", { x: -100, opacity: 0 }, { x: 0, opacity: 1, duration: 0.05 }, 0.85);

            $('a[href^="#"]').on('click', function (e) {
                e.preventDefault();
                var target = $(this.getAttribute('href'));
                if (target.length) {
                    $('html, body').stop().animate({ scrollTop: target.offset().top - 80 }, 1000);
                }
            });

            // Portfolio reveal
            (function initPortfolioReveal() {
                const items = gsap.utils.toArray('#portfolio .portfolio-item');
                if (!items.length) return;

                gsap.from(items, {
                    autoAlpha: 0,
                    x: 150,
                    duration: 1,
                    ease: 'power3.out',
                    stagger: 0.2,
                    immediateRender: false,
                    scrollTrigger: {
                        trigger: '#portfolio',
                        start: 'top 80%',
                        end: 'top 20%',
                        toggleActions: 'play none none none'
                    }
                });
            })();
        });
    </script>
</body>

</html>